{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\")),\n    _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\")),\n    _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\")),\n    _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\")),\n    _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\")),\n    _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\")),\n    _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\")),\n    _scatterjsCore = require(\"scatterjs-core\"),\n    socketService = _scatterjsCore.SocketService,\n    proxy = function (a, b) {\n  return new Proxy(a, b);\n},\n    cache = {},\n    ScatterEOS =\n/*#__PURE__*/\nfunction (a) {\n  function b() {\n    return (0, _classCallCheck2.default)(this, b), (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(b).call(this, _scatterjsCore.Blockchains.EOS, _scatterjsCore.PluginTypes.BLOCKCHAIN_SUPPORT));\n  }\n\n  return (0, _inherits2.default)(b, a), (0, _createClass2.default)(b, [{\n    key: \"setSocketService\",\n    value: function b(a) {\n      socketService = a;\n    }\n  }, {\n    key: \"hookProvider\",\n    value: function d(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null,\n          c = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2];\n      return a = _scatterjsCore.Network.fromJson(a), {\n        requiredFields: {},\n        getAvailableKeys: function () {\n          var a = (0, _asyncToGenerator2.default)(\n          /*#__PURE__*/\n          _regenerator.default.mark(function a() {\n            return _regenerator.default.wrap(function (a) {\n              for (;;) switch (a.prev = a.next) {\n                case 0:\n                  return a.next = 2, socketService.sendApiRequest({\n                    type: \"identityFromPermissions\",\n                    payload: {}\n                  }).then(function (a) {\n                    return a ? a.accounts.filter(function (a) {\n                      return a.blockchain === _scatterjsCore.Blockchains.EOS;\n                    }).map(function (a) {\n                      return a.publicKey;\n                    }) : [];\n                  });\n\n                case 2:\n                  return a.abrupt(\"return\", a.sent);\n\n                case 3:\n                case \"end\":\n                  return a.stop();\n              }\n            }, a, this);\n          }));\n          return function b() {\n            return a.apply(this, arguments);\n          };\n        }(),\n        sign: function () {\n          var d = (0, _asyncToGenerator2.default)(\n          /*#__PURE__*/\n          _regenerator.default.mark(function d(e) {\n            var f;\n            return _regenerator.default.wrap(function (d) {\n              for (;;) switch (d.prev = d.next) {\n                case 0:\n                  return f = b ? b() : {}, e.serializedTransaction = Buffer.from(e.serializedTransaction).toString(\"hex\"), d.abrupt(\"return\", new Promise(\n                  /*#__PURE__*/\n                  function () {\n                    var b = (0, _asyncToGenerator2.default)(\n                    /*#__PURE__*/\n                    _regenerator.default.mark(function b(d, g) {\n                      return _regenerator.default.wrap(function (b) {\n                        for (;;) switch (b.prev = b.next) {\n                          case 0:\n                            socketService.sendApiRequest({\n                              type: \"requestSignature\",\n                              payload: {\n                                transaction: e,\n                                blockchain: _scatterjsCore.Blockchains.EOS,\n                                network: a,\n                                requiredFields: f\n                              }\n                            }).then(function (a) {\n                              return c ? void d({\n                                signatures: a.signatures,\n                                serializedTransaction: Buffer.from(e.serializedTransaction, \"hex\")\n                              }) : d(a.signatures);\n                            }).catch(function (a) {\n                              return g(a);\n                            });\n\n                          case 1:\n                          case \"end\":\n                            return b.stop();\n                        }\n                      }, b, this);\n                    }));\n                    return function () {\n                      return b.apply(this, arguments);\n                    };\n                  }()));\n\n                case 3:\n                case \"end\":\n                  return d.stop();\n              }\n            }, d, this);\n          }));\n          return function a() {\n            return d.apply(this, arguments);\n          };\n        }()\n      };\n    }\n  }, {\n    key: \"signatureProvider\",\n    value: function c() {\n      var a = this,\n          b = 0 >= arguments.length ? void 0 : arguments[0]; // Protocol will be deprecated.\n\n      return function (b, c) {\n        var d = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {};\n        b = _scatterjsCore.Network.fromJson(b);\n\n        var e = {},\n            f = function () {\n          return e;\n        },\n            g = a.hookProvider(b, f, d.beta3 || !1); // The proxy stands between the eosjs object and scatter.\n        // This is used to add special functionality like adding `requiredFields` arrays to transactions\n\n\n        return proxy(new c(Object.assign(d, {\n          signatureProvider: g\n        })), {\n          get: function c(a, b) {\n            return function () {\n              if (\"undefined\" == typeof a[b]) throw new Error(\"\".concat(b, \" does not exist on the eosjs.Api() object.\"));\n\n              for (var c = arguments.length, d = Array(c), f = 0; f < c; f++) d[f] = arguments[f];\n\n              var g = d.find(function (a) {\n                return a.hasOwnProperty(\"requiredFields\");\n              });\n              return e = g ? g.requiredFields : {}, a[b].apply(a, d);\n            };\n          }\n        }); // Proxy\n      };\n    }\n  }]), b;\n}(_scatterjsCore.Plugin);\n\nexports.default = ScatterEOS, \"undefined\" != typeof window && (window.ScatterEOS = ScatterEOS);","map":null,"metadata":{},"sourceType":"script"}